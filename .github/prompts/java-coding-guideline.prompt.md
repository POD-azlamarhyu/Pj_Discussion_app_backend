---
applyTo: "*.java"
description: "Javaコーディング規約に従うことを指示する．単発でコードを生成する場合にも適用する．"
---

# Java共通コーディング規約

## 基本理念
 - 品質・保守性・可読性を最優先すること
 - 一貫性を保つこと
 - チームの他のメンバーが理解しやすいコードを書くこと

## コードの品質基準
 - DRY原則（Don't Repeat Yourself）を遵守すること
 - KISS原則（Keep It Simple, Stupid）を遵守すること
 - YAGNI原則（You Aren't Gonna Need It）を遵守すること
 - SOLID原則を遵守すること
 - 適切なデザインパターンを使用すること
 - 意味のある変数名、メソッド名、クラス名を使用すること
 - 適切なコメントを追加すること。コメントの内容は原則「なぜ，そのようなコードを実装したのか」などの経緯を説明する。
 - プロジェクトで一貫したコーディングスタイルを維持すること
 - 関心の分離（SoC）を徹底して巨大クラス・巨大メソッドを避けること
 - マジックナンバーを避け、定数を使用すること
 - 適切な例外処理を行うこと
 - ロギングを適切に行うこと
 - ネストは深くしすぎないこと（目安として2レベル以内）


## 命名規則
 - クラス名、インターフェース名、列挙型名、アノテーション名はUpperCamelCaseを使用すること
 - メソッド名、変数名、フィールド名はlowerCamelCaseを使用すること
 - 定数名はすべて大文字で、単語の区切りにアンダースコアを使用すること（例：MAX_SIZE）
 - パッケージ名はすべて小文字で、ドメイン名の逆順を使用すること（例：com.example.project）
 - テストクラス名は対象クラス名に「Tests」を付加すること
 - テストメソッド名は動詞で始め、何をテストしているかを明確にする、サフィックスとしてTestをつけること（例：calculateTotalTest）
 - 原則英語で記述すること

## テスト
 - カバレッジを高く保つこと（目標80%以上）
 - モックやスタブを適切に使用すること
 - テストは独立して実行できること
 - テスト間の依存を避けて，テストの順序に依存しないこと
 - テストデータは必要最小限にすること

## セキュリティについて
 - ユーザー入力の検証とサニタイズを徹底すること
 - SQLインジェクション、クロスサイトスクリプティング（XSS）などの一般的な脆弱性に対する防御策を講じること
 - 機密情報（パスワード、APIキーなど）はコードにハードコーディングしないこと
 - すべての外部入力を検証し，信頼しないこと
 - セキュリティライブラリやフレームワークを適切に使用すること

## 保守性とリファクタリング
 - 機能追加と同時に既存コードの改善を検討すること
 - 大規模な変更は小さなステップに分割して行うこと
 - 使用されていないコードは削除すること
 - 技術的な負債はコメントで明示しする

## ドキュメント
 - 主要なクラスとメソッドにはJavadocコメントを追加すること
 - ControllerにはOpenAPIの仕様として，スキーマやエンドポイントの説明を追加すること

## 開発時
 - コメントやアノテーションへの記述は、開発者が見やすいように日本語できれいな文章で記述すること
 - テストコードにおいても、日本語を使用すること
 - テストコードにおけるテストデータは、原則日本語を使用すること。プロンプトで指示があった場合は例外とする。